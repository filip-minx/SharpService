<!doctype html>

<html>
	<head>
		<title>SharpService</title>

		<style type="text/css">

			* {
				color: white;
				font-family: consolas;
				border: 0px;
				margin: 0px;
				padding: 0px;
			}

			body {
				margin: 0px;
				padding: 0px;
			}

			#output {
				position: absolute;
				width: 100%;
				height: 90%;
				background-color: #1c1c1c;
			}

			#input {
				position: absolute;
				width: 100%;
				height: 10%;
				top: 90%;
				background-color: #383838;
			}

			textarea {
			    border: none;
			    overflow: auto;
			    outline: none;
			    -webkit-box-shadow: none;
			    -moz-box-shadow: none;
			    box-shadow: none;
			    resize: none;
			}

			#input-text
			{
				position: absolute;
				left: 50px;
				height: 100%;
				margin-left: 10px;
				width: calc(100% - 60px);
				background: transparent;
			}

			#output-text
			{
				position: absolute;
				height: calc(100% - 10px);
				width: calc(100% - 10px);
				background: transparent;
				padding: 5px;
			}

			#submit-button
			{
				position: absolute;
				width: 50px;
				height: 100%;
				color: black;
			}

		</style>

	</head>
	<body>
		<div id="output">
			<textarea id="output-text" readonly></textarea>
		</div>
		
		<div id="input">
			<div id="inputForm" method="post">
				<button id="submit-button">Send</button>
				<textarea id="input-text" name="inputCode"></textarea>	
				
			</div>

		</div>

		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

		<script type="text/javascript">

			$("#submit-button").click(function() {
				PostExecution();
			});

			function PostExecution() {
				var code = $("#input-text").val()
				
				$("#input-text").val("");
				
				$.post("executions", code, function (data) {
					console.log(data);
					$("#output-text").append(data + "\n");
				});
			}

			$("#inputForm").keydown(function (e) {
				if (e.ctrlKey && e.which == 13) {
					PostExecution();
				}
			});

			$(document).delegate('#input-text', 'keydown', function (e) {
				var keyCode = e.keyCode || e.which;

				if (keyCode == 9) {
					e.preventDefault();
					var start = this.selectionStart;
					var end = this.selectionEnd;

					// set textarea value to: text before caret + tab + text after caret
					$(this).val($(this).val().substring(0, start)
						+ "\t"
						+ $(this).val().substring(end));

					// put caret at right position again
					this.selectionStart =
						this.selectionEnd = start + 1;
				}
			});
		</script>

	</body>


</html>