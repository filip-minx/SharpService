<!doctype html>

<html>
	<head>
		<title>SharpService</title>

		<link rel="stylesheet" type="text/css" href="codemirror-5.42.0/lib/codemirror.css" />
	    <link rel="stylesheet" type="text/css" href="codemirror-5.42.0/theme/lesser-dark.css" />
	    <script type="text/javascript" src="codemirror-5.42.0/lib/codemirror.js"></script>
	    <script type="text/javascript" src="codemirror-5.42.0/mode/clike/clike.js"></script>

		<style type="text/css">

			html, body {height: 100%;}
			
			* {
				color: white;
				font-family: consolas;
				border: 0px;
				margin: 0px;
				padding: 0px;
			}

			body {
				margin: 0px;
				padding: 0px;
			}

			#output {
				position: absolute;
				width: 100%;
				height: 60%;
				background-color: #1c1c1c;
			}

			#input {
				position: absolute;
				width: 100%;
				height: 40%;
				top: 60%;
				/*background-color: #383838;*/
			}

			textarea {
			    border: none;
			    overflow: auto;
			    outline: none;
			    -webkit-box-shadow: none;
			    -moz-box-shadow: none;
			    box-shadow: none;
			    resize: none;
			}

			#input-text
			{
				position: absolute;
				left: 50px;
				height: 100%;
				margin-left: 10px;
				width: calc(100% - 60px);
				background: transparent;
			}

			#output-text
			{
				position: absolute;
				height: calc(100% - 10px);
				width: calc(100% - 10px);
				background: transparent;
				padding: 5px;
			}
		</style>

		

	</head>
	<body>
		<div id="output">
			<textarea id="output-text" readonly></textarea>
		</div>
		
		<div id="input">
			<textarea id="input-text" name="inputCode"></textarea>	
		</div>

		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

		<script type="text/javascript">

			var editor = CodeMirror.fromTextArea($("#input-text")[0], {
		        lineNumbers: true,
		        theme: "lesser-dark",
		        mode: "text/x-csharp",
		        height: "auto",
		        extraKeys : {
		        	"Ctrl-Enter" : PostExecution
		        }
		      });

			editor.setSize("100%", "100%");

			var root = "http://" + window.location.hostname + "/SharpService/"

			$("#submit-button").click(function() {
				PostExecution();
			});

			function PostExecution() {
				var code = editor.getValue();
				editor.setValue("");

				$.post(root + "executions", code, function (data) {
					console.log(data);
					$("#output-text").append(data + "\n");
					$("#output-text").scrollTop($("#output-text")[0].scrollHeight);
				});
			}
			
		</script>

	</body>


</html>